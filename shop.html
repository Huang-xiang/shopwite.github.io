<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>線上購物賣場</title>
  <link rel="stylesheet" href="shop.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>

<header>
  <h1>歡迎來到昱翔的小店</h1>
  <p>精選商品，輕鬆購物！</p>
</header>

<main>
   <!-- 新聞牆 -->
  <section class="news-wall">
    <h2>📰 最新消息</h2>
    <ul>
      <li><strong>2025/06/08</strong> - 新系列「終極進化」將於本月下旬發售！</li>
      <li><strong>2025/06/05</strong> - 特別版皮卡丘卡包限量預購中。</li>
    </ul>
  </section>

  <!-- 搜尋功能 -->
  <section class="search-container">
    <input type="text" id="searchBar" placeholder="搜尋卡牌...">
  </section>
  <section class="product-list">
    <div class="product-card">
      <img src="No21.jpg" alt="商品1">
      <h3>變裝皮卡丘(六尾) </h3>
      <p>Card number:87782137</p>
      <p class="price">NT$10000</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No3.jpg" alt="商品2">
      <h3>夏日皮卡丘 </h3>
      <p>Card number:95693979</p>
      <p class="price">NT$2500</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No4.jpg" alt="商品3">
      <h3>朱紫皮卡丘</h3>
      <p>Card number:79738259</p>
      <p class="price">NT$2000</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No5.jpg" alt="商品4">
      <h3>橫濱皮卡丘</h3>
      <p>Card number:92886523</p>
      <p class="price">NT$9500</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No22.jpg" alt="商品4">
      <h3>變裝皮卡丘(木木梟)</h3>
      <p>Card number:92227119</p>
      <p class="price">NT$19900</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No6.jpg" alt="商品1">
      <h3>151皮卡丘(大師球)</h3>
      <p>Card number:86923676</p>
      <p class="price">NT$10000</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No7.jfif" alt="商品1">
      <h3>偵探皮卡丘</h3>
      <p>Card number:853681775</p>
      <p class="price">NT$4300</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No8.jfif" alt="商品1">
      <h3>超電突圍皮卡丘(SR)</h3>
      <p>Card number:108544832</p>
      <p class="price">NT$1800</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No9.jfif" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No10.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No11.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No12.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No13.jfif" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No14.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No15.jfif" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No16.jfif" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No17.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No18.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No19.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
    <div class="product-card">
      <img src="No20.jpg" alt="商品1">
      <h3>商品 A</h3>
      <p>Card number:</p>
      <p class="price">NT$299</p>
      <button class="add-to-cart">加入購物車</button>
    </div>
  </section>
  <!-- 商品列表 -->
  <section id="productList"></section>
    <div class="pagination">
      <button id="prevPage">上一頁</button>
      <button id="nextPage">下一頁</button>
    </div>

  <section class="cart">
    <h2>🛒 購物車</h2>
    <ul class="cart-items"></ul>
    <p class="total">總計：NT$ 0</p>
    <button class="checkout">前往結帳</button>
  </section>
</main>

<footer>
  <p>&copy; 2025 昱翔的卡牌小店 | 僅供學習用途</p>
</footer>

<script>
  const cartItems = [];
  const cartList = document.querySelector('.cart-items');
  const totalEl = document.querySelector('.total');

  document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', () => {
      const productCard = button.closest('.product-card');
      const name = productCard.querySelector('h3').textContent;
      const price = parseInt(productCard.querySelector('.price').textContent.replace(/[^\d]/g, ''));

      cartItems.push({ name, price });
      updateCart();
    });
  });

  function updateCart() {
    cartList.innerHTML = '';
    let total = 0;
    cartItems.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.name} - NT$${item.price}`;
      cartList.appendChild(li);
      total += item.price;
    });
    totalEl.textContent = `總計：NT$ ${total}`;
  }

  document.getElementById('searchBar').addEventListener('input', function () {
    const query = this.value.toLowerCase();
    document.querySelectorAll('.product-card').forEach(card => {
      card.style.display = card.textContent.toLowerCase().includes(query) ? '' : 'none';
    });
  });

  /*換頁功能*/
  let currentPage = 2;
  const itemsPerPage = 20;

  function displayProducts() {
    const searchValue = document.getElementById('searchBar').value.toLowerCase();
    const filtered = products.filter(p => p.name.toLowerCase().includes(searchValue));
    const totalPages = Math.ceil(filtered.length / itemsPerPage);
    if (currentPage > totalPages) currentPage = totalPages || 1;
    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const paged = filtered.slice(start, end);

    const productList = document.getElementById('productList');
    productList.innerHTML = paged.map(p => `
      <a href="product-detail.html?id=${p.id}" class="product-card">
        <img src="${p.img}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>${p.desc}</p>
        <p class="price">NT$ ${p.price}</p>
      </a>
    `).join('');

    document.getElementById('prevPage').disabled = currentPage === 1;
    document.getElementById('nextPage').disabled = currentPage >= totalPages;
  }

  document.getElementById('searchBar').addEventListener('input', () => {
    currentPage = 1;
    displayProducts();
  });

  document.getElementById('prevPage').addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      displayProducts();
    }
  });

  document.getElementById('nextPage').addEventListener('click', () => {
    currentPage++;
    displayProducts();
  });

  displayProducts();
</script>

</body>
</html>
